! inlist_evolve

&star_job

      report_retries = .true.

      load_saved_model = .true.
      load_model_filename     = '1_M_J_9_kb_per_mu.mod'

      save_model_when_terminate = .true.
      save_model_filename         = 'evolved.mod'

      save_photo_when_terminate  = .true.
      show_log_description_at_start = .false.
      
      ! when to stop
      required_termination_code_string = 'max_age'

      ! reset age
      set_initial_age = .true.
      initial_age = 0d0
      
      ! reset model number
      set_initial_model_number = .true.
      
      ! reset energy error
      set_initial_cumulative_energy_error = .true.


/ !end of star_job


&controls

   log_directory   = 'LOGS'

   ! mixing parameters
   ! =================
   mixing_length_alpha = 1d0

   ! Ledoux criterion
   use_Ledoux_criterion = .true.
   num_cells_for_smooth_gradL_composition_term = 0


   ! MLT option
   MLT_option = 'Henyey'
   mix_factor = 0d0
   prune_bad_cz_min_Hp_height = 1d0
   steps_before_use_velocity_time_centering = 0
   ! use_gradT_actual_vs_gradT_MLT_for_T_gradient_eqn = .true.
   
   ! mlt_make_surface_no_mixing = .true.

   ! MLT part
   energy_eqn_option = 'dedt'

   ! mesh controls
   ! ===============
   ! convective_bdy_weight = 2.0
   mesh_delta_coeff = 1d0

   ! when to stop
   ! ===============
   max_model_number = 5000
   max_age = 5d9

   ! solver controls
   ! ===============

   ! tol_correction_norm = 1d-5
   ! tol_max_correction = 1d-4
   ! tol_bad_max_correction = 3d-3

   solver_max_tries_before_reject = 40
   max_tries_for_retry = 50
   max_tries_after_5_retries = 60
   max_tries_after_10_retries = 70
   max_tries_after_20_retries = 80

   use_gold_tolerances = .false.

   tol_residual_norm1 = 1d-8
   tol_max_residual1 = 1d-6
   iter_for_resid_tol2 = 25 ! after this many iterations, switch to tol2

   tol_residual_norm2 = 1d-6 ! worked: 1d-4
   tol_max_residual2 = 1d-4  ! worked: 1d-2
   iter_for_resid_tol3 = 30 ! after this many iterations, switch to tol3

   tol_residual_norm3 = 1d-5 ! 1d-6
   tol_max_residual3 = 1d-3   ! 1d-3

   solver_iters_timestep_limit = 35

   max_resid_jump_limit = 1d18
   max_corr_jump_limit = 1d18

   ! hydro solver
   hydro_mtx_max_allowed_logT = 6d0
   hydro_mtx_min_allowed_logT = 2d0

   ! helium rain
   ! ==========
   do_element_sedimentation = .true.
   element_sedimentation_maximum_dXi_per_cell = -1d0
   element_sedimentation_method = 'instant_rain'
   element_sedimentation_phase_diagram_temperature_shift = 0d0
   element_sedimentation_phase_diagram = 'src/Schoettler+2018.csv'


   ! atmosphere
   ! ==========
   atm_option = 'irradiated_grey'
   atm_irradiated_opacity = 'iterated'
   atm_irradiated_T_eq = 122d0
   atm_irradiated_max_iters = 500
   atm_irradiated_kap_v = 1d-3
   atm_irradiated_P_surf = 1d4

   ! timestep controls
   ! =================
   max_years_for_timestep = 1d7
   delta_lgTeff_limit = 0.04d0
   delta_lgL_limit = 0.2d0
   
   ! debug
   report_ierr = .true.
   report_solver_progress = .false.
   report_solver_dt_info = .false.
   report_dt_hard_limit_retries = .false.

   ! output to files and terminal
   ! ===========================

   ! photos
   photo_interval = 10 ! 10
   write_profiles_flag = .true.

   ! profiles
   profile_interval = 1000000  ! we save profiles via an alternative routine in run_star_extras.f90
   max_num_profile_models = 100000

   ! history
   history_interval = 10

   ! terminal
   terminal_interval = 1
   write_header_frequency = 50

   ! other
   num_trace_history_values = 3
   trace_history_value_name(1) = 'rel_cumulative_energy_error'
   trace_history_value_name(2) = 'center_entropy'
   trace_history_value_name(3) = 'num_zones'

/
